{"version":3,"file":"2.49480749df61914e0123.hot-update.js","sources":["webpack:///src/components/templateEditor.js?98bc"],"sourcesContent":["import React, { Component, PropTypes } from 'react'\r\nimport CodeMirror from 'react-codemirror';\r\n\r\nexport default class TemplateEditor extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.getInitialState();\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch('/api/templates/' + localStorage.getItem(\"templateName\"),\r\n            {\r\n                method: 'GET',\r\n                credentials: \"same-origin\",\r\n                headers: {\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t}\r\n            })\r\n            .then(result => result.body.getReader().read())\r\n            .then(res => new TextDecoder().decode(res.value))\r\n            .then(templateText => {\r\n                this.updateCode(templateText);\r\n            });\r\n    }\r\n\r\n    getInitialState() {\r\n        return {\r\n            code: \"<div></div>\",\r\n        };\r\n    }\r\n\r\n    updateCode(newCode) {\r\n        console.log(newCode)\r\n        this.setState({\r\n            code: newCode,\r\n        });\r\n    }\r\n\r\n    saveTemplate() {\r\n        fetch('/api/templates/' + localStorage.getItem(\"templateName\"),\r\n            {\r\n                method: 'PUT',\r\n                credentials: \"same-origin\",\r\n                body: this.state.code\r\n            })\r\n            .then(() => {\r\n                window.location.replace('cabinet.html')\r\n            });\r\n    }\r\n\r\n    render() {\r\n        var options = {\r\n            lineNumbers: true,\r\n            mode: \"htmlmixed\"\r\n        };\r\n        return <div> \r\n            <CodeMirror value={this.state.code} onChange={this.updateCode.bind(this)} \r\n            options={options}/>\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={this.saveTemplate.bind(this)}>Сохранить</button>\r\n        </div>\r\n    \t}\r\n}\n\n\n// WEBPACK FOOTER //\n// src/components/templateEditor.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;;;;;AACA;;;AACA;AAAA;AACA;AADA;AACA;AACA;AAFA;AAGA;AACA;;;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAHA;AAOA;AAAA;AACA;AAAA;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;AAKA;;;;;AAzDA;;;;A","sourceRoot":""}